<div class="min-vh-100 bg-gradient-primary py-4">
  <div class="container">

    <!-- כרטיס-מסגרת לכל העמוד -->
    <div class="card app-frame rounded-4 shadow-lg mx-auto">
      <div class="card-body p-4 p-lg-5">

        <!-- ספינר -->
        <app-spinner [show]="loading"></app-spinner>

        <!-- כותרת + 2 כפתורים למעלה  -->
        <div class="text-center mb-4">
          <h1 class="display-6 fw-bold text-primary mb-2">📱 מנהל אנשי קשר</h1>
          <p class="text-muted mb-4">נהל את אנשי הקשר שלך בקלות ובפשטות</p>

          <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
            <!-- הוסף איש קשר חדש -->
            <button type="button" class="btn btn-primary px-4 py-2 rounded-pill shadow-sm" (click)="onNewContact()"> <i
                class="fas fa-plus me-2"></i> הוסף איש קשר חדש</button>

            <!-- הוסף אנשי קשר לדוגמה -->
            <button type="button" class="btn btn-success px-4 py-2 rounded-pill shadow-sm"
              (click)="onAddRandomContacts()" [disabled]="loading">
              <i class="fas fa-users me-2"></i> הוסף אנשי קשר לדוגמה </button>

          </div>
        </div>

        <!-- מצב ריק  -->
        <div *ngIf="!loading && contactService.contacts.length === 0" class="text-center py-5">
          <i class="fas fa-address-book text-muted d-block mb-3" style="font-size: 3.5rem;"></i>
          <h3 class="fw-bold text-dark mb-2">אין אנשי קשר עדיין</h3>
          <p class="text-muted mb-4">התחל בהוספת אנשי קשר כדי לנהל את הרשימה שלך</p>
        </div>

        <!-- רשימת אנשי קשר  -->
        <div *ngIf="!loading && contactService.contacts.length > 0">
          <!-- מונה -->
          <div class="text-center mb-4">
            <div class="bg-light rounded-3 shadow-sm d-inline-block px-3 py-2">
              <span class="text-muted">סך הכל:</span>
              <span class="fw-bold text-primary ms-1"> {{ contactService.contacts.length }} אנשי קשר </span>
            </div>
          </div>

          <!-- כרטיסי אנשי קשר -->
          <div class="row g-4">
            <div *ngFor="let contact of contactService.contacts; let i = index" class="col-12 col-md-6 col-xl-4">
              <div class="contact-card bg-white rounded-4 shadow-sm h-100 position-relative overflow-hidden"
                (click)="onContactClick(contact)" [style.animation-delay]="(i * 0.1) + 's'">

                <!-- פס דקורטיבי עדין למעלה -->
                <div class="w-100" style="height:6px; background: linear-gradient(90deg,#0d6efd22,#19875422);"></div>

                <div class="p-4">
                  <div class="d-flex align-items-start">
                    <!-- תמונה -->
                    <div class="me-3 position-relative">
                      <img
                        [src]="contact.image || 'https://ui-avatars.com/api/?name=' + contact.name + '&background=0d69fd&color=fff&size=80'"
                        [alt]="contact.name" class="rounded-circle border border-3 border-white shadow-sm"
                        style="width: 72px; height: 72px; object-fit: cover;">
                    </div>
                    <!-- פרטים -->
                    <div class="flex-grow-1 min-width-0">

                      <!-- שם -->
                      <h5 class="fw-bold text-dark mb-2 text-truncate">{{ contact.name }}</h5>

                      <!-- מייל -->
                      <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-envelope text-primary me-2"></i>
                        <span class="text-muted small text-truncate">{{ contact.email }}</span>
                      </div>

                      <!-- טלפון נייד -->
                      <div class="d-flex align-items-center mb-2" *ngIf="contact.cell">
                        <i class="fas fa-mobile-alt text-success me-2"></i>
                        <a class="text-muted small text-decoration-none" [href]="'tel:' + contact.cell" dir="ltr">{{
                          contact.cell }}</a>
                      </div>

                      <!-- כתובת -->
                      <div class="d-flex align-items-center">
                        <i class="fas fa-map-marker-alt text-danger me-2"></i>
                        <span class="text-muted small text-truncate">{{ contact.fullAddress }}</span>
                      </div>

                    </div>
                  </div>

                </div>

              </div>
            </div>
          </div>


        </div>

      </div>
    </div>


  </div>
</div>